---
layout: page
section: analyst
title: "Настройки проекта"
date: 2017-08-25 15:00:00
order: 1
---

В зависимости от особенностей архитектуры вашего сайта могут отличаться и настройки проекта. Если ваш сайт построен на технологии AJAX, или разные разделы сайта располагаются на разных поддоменах и в некоторых других случаях вам необходимо сделать ряд настроек.

### Навигация по странице
------
<ul class="page-navigation">
  <li><a href="#0">Введение</a></li>
  <li><a href="#1">Автоматическая отправка события Viewed Page</a></li>
  <li><a href="#2">Использовать Cookie вместо LocalStorage для хранения данных</a></li>
  <li><a href="#3">Длина сессии в секундах</a></li>
  <li><a href="#4">Максимальная ширина сайта в пикселях</a></li>
  <li><a href="#5">Отслеживать ошибки валидации</a></li>
  <li><a href="#6">Отслеживать все ошибки JavaScript</a></li>
</ul>

### <a name="0"></a>Введение
------
Чтобы задать настройки:
1. Авторизуйтесь на сайте [ddmanager.ru](https://admin.ddmanager.ru/)
2. Кликните на ссылку "настройки" в правом верхнем углу окна.
3. Сделайте настройки согласно документации ниже
4. Опубликуйте проект.

![](/img/settings.png)

### <a name="1"></a>Автоматическая отправка события Viewed Page
------
Событие `Viewed Page` - это базовое событие. Оно необходимо для работы большинства сторонних систем. Вместе с событием Viewed Page в сторонние системы отправляются различные данные из объекта `digitalData`: `digitalData.page.type`, `digitalData.user.userId`, `digitalData.listing.categoryId` и многие другие.

> Событие `Viewed Page`  должно быть добавлено в массив `digitalData.events` только после полного заполнения данными объекта `digitalData`.

По умолчанию DigitalDataManager автоматически добавляет событие `Viewed Page` в массив `digitalData.events` в момент загрузки библиотеки `ddmanager.js`. Это происходит при каждой загрузке страницы.

Если вы добавляете событие `Viewed Page` в массив `digitalData.events` самостоятельно из кода сайта, делайте это только после заполнения объекта digitalData всеми переменными. В этом случае выключите тумблер "Автоматической отправки события Viewed Page".

### <a name="2"></a>Использовать Cookie вместо LocalStorage для хранения данных
------
DigitalDataManager позволяет на основе событий и переменных объекта `digitalData` создавать новые переменные и сохранять их на определенный срок. Например: вам необходимо передать в google analytics количество просмотров карточек товаров перед покупкой. Подробнее о сохранении переменных читайте в разделе [Переменные](/for-analyst/events/).

По умолчанию значение любой переменной сохраняется в [LocalStorage](https://www.w3schools.com/html/html5_webstorage.asp) браузера посетителя в виде строки. LocalStorage поддерживается всеми современными браузерами. В отличие от Cookie, LocalStorage является более безопасным хранилищем, вмещает до 5 мб, и информация никогда не отправляется на сервер.

Однако LocalStorage хранит информацию в рамках одного домена. Это значит, что вы не можете получить доступ к информации со страниц поддомена.

> Если разные разделы вашего сайта расположены на поддоменах - используйте Cookie вместо LocalStorage

В качестве домена для установки cookie укажите домен верхнего уровня.
Например, ваш интернет-магазин расположен по адресу https://shop.ru, но корзина расположена по адресу https://cart.shop.ru. Чтобы со страниц корзины была доступна информация, сохраненная на страницах карточек товаров, необходимо использовать cookie с доменом shop.ru

> Cookie хранят только 4кб. Обратите на это внимание при сохранении больших массивов или строк.

### <a name="3"></a> Длина сессии в секундах
------
DigitalDataManager имеет встроенное событие `Session Started`. Это событие автоматически добавляется в массив `digitalData.events` в случае, если у данного пользователя с момента любого другого события прошло больше заданного отрезка времени. По умолчанию этот отрезок времени (Длина сессии) равен одному часу или 3600 секунд.
Примеры:
1. Пользователь впервые попал на сайт. Одновременно с первым событием `Viewed Page` DigitalDataManager добавит событие `Session Started` в массив `digitalData.events`.
2. Пользователь ходил по сайту, оставил вкладку браузера открытой и ушел на 2 часа. Пользователь вернулся к сайту и кликнул на баннер или перешел на другую страницу. В этот момент событие `Session Started` будет автоматически добавлено в массив `digitalData.events`.

Это событие может вам понадобиться, если вы захотите обнулять или перезаписывать значение переменной в объекте digitalData в момент старта новой сессии.

> Рекомендуем и в Google Analytics и в DigitalDataManager задать одинаковую длину сессии.

### <a name="4"></a> Максимальная ширина сайта в пикселях
------
Если вы используете на сайте блок со слайдером баннеров, рекомендуем задать в поле настройки максимальную ширину окна вашего сайта. Эта настройка поможет правильно учитывать [события показов баннеров](/events/viewed-campaign).

### <a name="5"></a> Отслеживать ошибки валидации
------
DigitalDataManger имеет встроенный [модуль отслеживания ошибок работы интеграций](/for-analyst/integrations#2). Данный модуль выводит в консоль разработчика информацию обо всех данных, отправляемых в сторонние системы. Если вы включите отслеживание ошибок валидации, то каждый раз при возникновении ошибки в работе интеграции у любого из посетителей сайта, DigitalDataManager будет автоматически добавлять это событие в массив `digitalData.events`. Теперь это событие может быть отправлено в любую систему статистики для последующего анализа причин возникновения ошибки.

Если у вас настроена интеграция с [Google Analytics](/integrations/google-analytics), информацию об ошибках валидации вы найдете в отчетах по событиям.

### <a name="6"></a> Отслеживать все ошибки JavaScript
------
DigitalDataManger также умеет перехватывать сообщения о возникновении любых JavaScript-ошибок на вашем сайте. Обычно на сайтах происходят тысячи ошибок: не подгружаются библиотеки сторонних систем, ошибки в скриптах разработчиков, непредвиденные действия пользователей и так далее. Все эти ошибки могут быть переданы в Google Analytics с хитами типа [exceptions](https://developers.google.com/analytics/devguides/collection/analyticsjs/exceptions). Построив кастомный отчет в интерфейсе Google Analytics вы сможете найти страницы и условия при которых случаются ошибки.

![](/img/settings.1.png)
Пример настройки отчета в интерфейсе Google Analytics