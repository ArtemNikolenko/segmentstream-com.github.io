---
layout: page
section: integrations
title: "Mindbox"
order: 1
---

В данном разделе вы узнаете:
* Как подключить или отключить Mindbox на вашем сайте.
* Как передать кастомные параметры и события в Mindbox.

Mindbox - платформа автоматизации прямых коммуникаций с клиентами: email, push, sms, мессенджеры. SegmentStream позволяет отправлять данные о поведении ваших пользователей в [Mindbox](https://mindbox.ru).

### Навигация по странице
------
<ul class="page-navigation">
  <li><a href="#0">Введение</a></li>
  <li><a href="#0_1">Условия для подключения</a></li>
  <li><a href="#1">Идентификатор точки доступа</a></li>
  <li><a href="#2">Переменные пользователя</a></li>
  <li><a href="#3">Переменные заказа</a></li>
  <li><a href="#4">Переменные товара</a></li>
  <li><a href="#5">Мэппинг операций</a></li>
  <li><a href="#6">Идентификаторы потребителя</a></li>
  <li><a href="#7">Идентификаторы товара</a></li>
  <li><a href="#8">Идентификаторы SKU товара</a></li>
  <li><a href="#9">Идентификаторы товарной категории</a></li>
  <li><a href="#10">Идентификаторы зон</a></li>
</ul>

### <a name="0"></a>Введение
------
С помощью SegmentStream можно полностью интегрировать Mindbox с вашим сайтом.

Чтобы настроить интеграцию с Mindbox:
1. Авторизуйтесь на сайте [segmentstream.com](https://admin.segmentstream.com/) и перейдите к панели управления интеграциями
2. Войдите на вкладку "Интеграции" и кликните по блоку с логотипом Mindbox.
3. В открывшейся панели - настройте интеграцию.
![](/img/integrations.mindbox.01.png)
<br />
Подробнее о настройках вы можете прочитать ниже.

>Mindbox API V2 больше не поддерживается разработчиками. Ниже идет описание настройки интеграции сайта с Mindbox API V3.

### <a name="0_1"></a>Условия для подключения
------
Перед тем, как приступить к настройке интеграции в панели SegmentStream необходимо зарегистрироваться в подключаемой системе и подготовить все необходимые данные:
- Запросить у менеджера Mindbox ТЗ на интеграцию
- Запросите у менеджера системное поле `endpointId`. Менеджер mindbox может сказать, что это поле не нужно или устарело. Что делать в этом случае описано в

### <a name="1"></a>Идентификатор точки доступа
------
Идентификатор точки доступа - это системное поле `endpointId` в сниппете инициализации. Его можно узнать у представителей Mindbox.<br/>
[Справка Mindbox по вызову основного трекера](https://developers.mindbox.ru/docs/%D1%82%D1%80%D0%B5%D0%BA%D0%B5%D1%80)

> Если в вашем ТЗ отсутствует поле `endpointId`, то библиотека mindbox определяет точку доступа по домену автоматически. В этом случае оставьте поле пустым.

### <a name="2"></a>Переменные пользователя
------
Переменные пользователя - это набор характеристик, которые описывают пользователя: имя, фамилия, телефон, адрес электронной почты и так далее. В ТЗ от mindbox в объекте `data.customer` описаны названия переменных, которые нужны для интеграции, например: `lastName`, `firstName`, `mobilePhone`...

В данной настройке вам нужно в левой части указать имя переменной из ТЗ Mindbox, в правой - имя переменной в digitalData.

![](/img/integrations.mindbox.2.png)

### <a name="3"></a>Переменные заказа
------
В разработке...

### <a name="4"></a>Переменные товара
------
Переменные товара - это набор характеристик, которые описывают товары на сайте: цена, название, размер, цвет и так далее. По умолчанию SegmentStream передает: идентификатор товаров, цена, количество единиц, добавленных в корзину.

В случае, если необходимо передать дополнительные параметры вам нужно сделать настройку соответствия: слева - имя переменной Mindbox, справа - имя переменной digitalData.

>Так как объект 'product' встречается во многих местах объекта 'digitalData': `digitalData.product`, `digitalData.cart.lineItems[]`, `digitalData.transaction.lineItems[]` и других, в настройке используйте только имя переменной без полного пути до нее. SegmentStream сам поймет в какой ситуацию из какого места брать информацию о товаре.

### <a name="5"></a>Мэппинг операций
------
Любая информация попадает в Mindbox в виде событий. К сожалению, в системе Mindbox нет зарезервированных имен для определенных событий, поэтому необходимо настроить правила соответствия, например: операция mindbox 'EnterSite' соответствует событию 'Logged In'.

Список названий необходимых операций есть в ТЗ Mindbox.

![](/img/integrations.mindbox.3.png)

### <a name="6"></a>Идентификаторы потребителя
------
В зависимости от особенностей ТЗ от Mindbox у каждого посетителя сайта может быть один или несколько идентификаторов.
Идентификаторы потребителя можно найти в ТЗ mindbox:
```javaScript
mindbox('async', {
  operation: '<Название операции>',
  data: {
    customer: {
      ids: {
      	<Идентификатор>: '<Значение идентификатора>',
      },
      ...
    },
    ...
  }
);
```
. Имя ключа необходимо указать в настройках интеграции. В соответствующем поле укажите из какой переменной `digitalData` необходимо забрать идентификатор. В большинстве случаев - это будет `digitalData.user.userId`.

### <a name="7"></a>Идентификаторы товара
------
В разработке...

### <a name="8"></a>Идентификаторы SKU товара
------
В разработке...

### <a name="9"></a>Идентификаторы товарной категории
------
В разработке...

### <a name="10"></a>Идентификаторы зон
------
В разработке...
