---
layout: page
section: developer
title: "digitalData"
date: 2017-06-05 12:00:00
order: 2
---

В данном разделе вы узнаете:
* Как установить слой данных digitalData на сайт.
* Как правильно заполнить все переменные объекта digitalData.

digitalData - это глобальный JavaScript объект. Его необходимо объявить как можно выше в исходном коде сайта, [перед подключением библиотеки DigitalDataManager](/for-developer/snippet). Данный объект должен присутствовать на каждой странице сайта.

> Объявляйте объект `window.digitalData` при первоначальной загрузке страницы. Не пытайтесь построить систему, в которой объект создается после AJAX-запроса. Такое решение ухудшит работу всей вашей маркетинговой инфраструктуры и сделает ее неуправляемой.

### Навигация по странице
------
<ul class="page-navigation">
  <li><a href="#0">Введение</a></li>
  <li><a href="#1">Как заполнять объект</a></li>
</ul>

### <a name="0"></a>Введение
------
Разберем структуру объекта подробнее. Объект состоит из других объектов и массивов. Все эти объекты и массивы необходимо заполнять информацией в соответствии со стандартом, описанным в данной документации.

В общем виде объект `digitalData` выглядит следующим образом:

```JavaScript
window.digitalData = {
  version: '1.1.2',
  website: {...},         //Глобальная информация о сайте
  page: {...},            //Текущая страница
  user: {...},            //Посетитель или авторизованный пользователь
  product: {...},         //Товар, отображаемый на странице
  wishlist: {...},        //Список избранных товаров
  cart: {...},            //Состояние покупательской корзины
  transaction: {...},     //Транзакция, которая была только что завершена 
  listing: {...},         //Список товаров, отображаемых на странице
  recommendation: [...],  //Список товаров, рекомендованных для пользователя
  campaigns: [...],       //Список всех маркетинговых кампаний
  changes: [...],         //Изменения которые произошли в DDL после инициализации
  events: [...]           //События, произошедшие на данной странице
}
```

Подробный состав каждой переменной мы разберем дальше.

### <a name="1"></a>Как заполнять объект
------
digitalData можно представить как структурированное описание страницы, которую посетитель видит на экране своего монитора. Состав объекта digitalData зависит от содержания страницы. Приведем несколько примеров:
 - Пользователь перешел на карточку товара и видит детальную информацию о товаре: изображение, название, цену, бренд и т.д. Вся эта информация должна содержаться в объекте `digitalData.product`
 - Пользователь перешел на главную страницу, видит список рекомендованных товаров и несколько баннеров. Информация о рекомендованных товарах должна содержаться в массиве `digitalData.recommendation`, а информация о баннерах в массиве `digitalData.campaigns`.
 - Иконка корзины с количеством товаров видна на каждой странице интернет-магазина. Это значит, что объект digitalData.cart должен быть заполнен на каждой странице сайта.

Также digitalData содержит информацию о том пользователе, который просматривает сайт. Эта информация может и не отображается в явном виде, но должна присутствовать в объекте, например: подписан ли пользователь на email-рассылку, совершал ли пользователь покупки ранее, имя пользователя и т.д.

Как видно из примеров выше, одни переменные должны быть заполнены на каждой страницы, другие - на определенных типах страниц. Если содержание страницы изменяется без перезагрузки страницы - содержание объекта `digitalData` также необходимо изменить.

Далее мы рассмотрим подробнее стандарт заполнения каждой переменной и разберем примеры заполнения объекта для всех типовых страниц интернет-магазина.

Подробное описание объектов:
 - [version](/digitaldata/standard-version)
 - [website](/digitaldata/website)
 - [page](/for-developer/#listing)
 - [product](/for-developer/#listing)
 - [wishlist](/for-developer/#listing)
 - [cart](/for-developer/#listing)
 - [transaction](/for-developer/#listing)
 - [listing](/for-developer/#listing)
 - [recommendation](/for-developer/#listing)
 - [campaigns](/for-developer/#listing)
 - [context](/for-developer/#listing)
 - [changes](/for-developer/#listing)
 - [events](/for-developer/#listing)

Подробнее описание состава digitalData для типовых страниц:
 - [Главная страница](/for-developer/#main-page)
 - [Категория товаров](/for-developer/#listing)
 - [Результаты поиска](/for-developer/#listing)
 - [Карточка товара](/for-developer/#listing)
 - [Корзина](/for-developer/#listing)
 - [Станицы этапов оформления заказа](/for-developer/#listing)
 - [Страница подтверждения заказа](/for-developer/#listing)
 - [Текстовая страница](/for-developer/#listing)