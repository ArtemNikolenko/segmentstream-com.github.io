---
layout: page
section: integrations
title: "OneSignal"
date: 2017-09-06 17:30:00
order: 1
---

В данном разделе вы узнаете: 
* Как подключить Веб-Пуши от oneSignal на сайте.
* Как настроить передачу сегментов в oneSignal.

OneSignal - система для отправки кросс-браузерных и кросс-платформенных пуш-уведомлений. OneSignal умеет создавать аудитории на основе событий сайта и отправлять браузерные пуши этой аудитории. DigitalDataManager позволяет передавать данные о поведении ваших пользователей в [oneSignal](https://onesignal.com/).


### Навигация по странице
------
<ul class="page-navigation">
  <li><a href="#0">Введение</a></li>
  <li><a href="#1">OneSignal App ID</a></li>
  <li><a href="#2">Safari Web ID</a></li>
  <li><a href="#3">Событие digitalData, инициирующее подписку на push</a></li>
  <li><a href="#4">Автоматическая регистрация</a></li>
  <li><a href="#5">Кнопка колокольчик</a></li>
  <li><a href="#6">Настройка тегов</a></li>
</ul>


### <a name="0"></a>Введение
------
С помощью DigitalDataManager можно полностью интегрировать OneSignal с вашим сайтом.<br />
[Техническая документация OneSignal](https://documentation.onesignal.com/docs/web-push-sdk-setup-https)

>Рекомендуем предварительно полностью перевести ваш сайт на протокол https. В этом случае процесс подписки на пуш-уведомления для ваших пользователей будет проще.

>Переда настройкой интеграции в интерфейсе DigitalDataManager необходимо установить в корень вашего сайта 3 файла.<br/> Подробнее читайте в [документации от OneSignal](https://documentation.onesignal.com/docs/web-push-sdk-setup-https#section-2-upload-required-files)

Чтобы настроить интеграцию с OneSignal: 
1. Авторизуйтесь на сайте [ddmanager.ru](https://admin.ddmanager.ru/) и перейдите к панели управления интеграциями
2. Войдите на вкладку "Интеграции" и кликните по блоку с логотипом OneSignal.
3. В открывшейся панели - настройте интеграцию.

![](/img/integrations.onesignal.1.png)

Подробнее о настройках вы можете прочитать ниже.


### <a name="1"></a>OneSignal App ID
------
Идентификатор проекта вы можете найти в интерфейсе OneSignal.

![](/img/integrations.onesignal.2.png)

Скопируйте идентификатор и вставьте его в поле "OneSignal App ID" окна настроек интеграции.

### <a name="2"></a>Safari Web ID
------
Для корректной работы веб-пушей в браузере safari необходимо указать специальный web ID. Этот идентификатор можно найти в интерфейсе OneSignal

![](/img/integrations.onesignal.3.png)

Скопируйте идентификатор и вставьте его в поле "Safari Web ID" окна настроек интеграции.

### <a name="3"></a>Событие digitalData, инициирующее подписку на push
------
Для того чтобы пользователь смог получать пуш-уведомления, сначала он должен подписаться. Форма для подписки зависит только от версии браузера, вы не можете ее никак изменить. Вы можете только управлять моментом появления формы ы браузере пользователя.

![](/img/integrations.onesignal.4.png)

 DigitalDataManager позволяет управлять моментом показа окна подписки. Для того чтобы задать этот момент, укажите в соответствующем поле имя события. После того, как данное событие произойдет (будет добавлено в массив `digitalData.events`), отобразится стандартное окно подписки на push-уведомления.

### <a name="4"></a>Автоматическая регистрация
------
Если включить данный тумблер, то окно подписки будет появляться сразу после загрузки первой страницы вашего сайта. 

>Не рекомендуем использовать данный метод сбора подписок.

### <a name="5"></a>Кнопка колокольчик
------
OneSignal предоставляет свой собственный виджет для управления окном подписки. Вы можете изменить цветовую схему виджета в интерфейсе OneSignal.

![](/img/integrations.onesignal.5.png)

Включите тумблер, чтобы использовать стандартный виджет от OneSignal для сбора подписок.

### <a name="6"></a>Настройка тегов
------
OneSignal дает широкие возможности для построения триггерных коммуникаций. Например вы можете настроить отправку пуш-уведомлений тем пользователям, которые положили товар в корзину и ушли (брошенная корзина). Для этого система должна знать состав корзины при каждой загрузки страницы.

DigitalDataManager умеет отправлять вместе с любыми событиями любую информацию из объекта `digitalData`.

Чтобы настроить передачу переменных, заполните 2 поля:
1. Слева - Название переменной, вы хотите видеть в интерфейсе OneSignal
2. В центре - укажите `digitalData`, если переменная присутствует в объекте всегда или `event`, если переменная появляется только в определенных событиях.
2. Справа - путь к переменной в объекте `digitalData` или `event`.

Пример заполнения смотрите на первом скриншоте.