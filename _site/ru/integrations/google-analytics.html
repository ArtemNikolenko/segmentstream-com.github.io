<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>SegmentStream documentation : Google Analytics</title>
        <meta name="description" content="">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/favicon/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/favicon/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/favicon/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/favicon/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/favicon/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/favicon/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/favicon/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="/favicon/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="/favicon/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="/favicon/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="/favicon/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="&nbsp;"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="/favicon/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="/favicon/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="/favicon/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="/favicon/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="/favicon/mstile-310x310.png" />

        <!-- <link rel="shortcut icon" type="image/x-icon" href="/favicon/favicon.ico"> -->
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/syntax.css">
        <link rel="stylesheet" href="/css/main.css?v=1.1">
        <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
        <script src="/js/main.js?v=1.1"></script>
    </head>
    <body>

        <div class="container">
            <div class="row">
                <div id="header" class="col-sm-12">
                    <div class="row">
    <div class="col-sm-3 col-xs-12">
        <div id="menu-toggle"></div>
        <a target="_blank" href="https://admin.segmentstream.com/"><div id="login-button"></div></a>
        <a class="brand" href="/"><img src="/img/segmentstream-logo.png" height="47" alt=SegmentStream documentation
                class="ddm-logo">
        </a>
        <small></small>
    </div>

    <div class="col-sm-offset-5 col-sm-4 authorization">
        <ul class="top-nav">
            <li>
                <a id="button-auth" target="_blank" href="https://admin.segmentstream.com/">
                    
                    Войти
                    
                </a>
            </li>
        </ul>
    </div>
        
            <a id="language-button" href='/'>EN</a>
        
</div>


                </div>
            </div>
            <div class="row">
                
                
                    <div id="navigation" class="col-sm-3 col-md-3">
                        <ul class="nav nav-list" >
    
    
        
        
        
        
        
        
    
        
        
        
        
        
        
    
        
        
        
        
        
        
    
        
        
        
        
        
        
    
        
        
        
        
        
        
    
        
        
        
        
        
        
    
        
        
        
        
        
            <li class="nav-header analystRU ">Аналитику</li>
            
                <li class="drop-menu analystRU " data-order="0">
                    <a href="/ru/for-analyst/index">Обзор</a>
                </li>
            
                <li class="drop-menu analystRU " data-order="1">
                    <a href="/ru/for-analyst/settings">Настройки проекта</a>
                </li>
            
                <li class="drop-menu analystRU " data-order="2">
                    <a href="/ru/for-analyst/events">События</a>
                </li>
            
                <li class="drop-menu analystRU " data-order="2">
                    <a href="/ru/for-analyst/integrations">Интеграции</a>
                </li>
            
                <li class="drop-menu analystRU " data-order="4">
                    <a href="/ru/for-analyst/variables">Переменные</a>
                </li>
            
                <li class="drop-menu analystRU " data-order="5">
                    <a href="/ru/for-analyst/scripts">Скрипты</a>
                </li>
            
                <li class="drop-menu analystRU " data-order="6">
                    <a href="/ru/for-analyst/priorities">Приоритеты</a>
                </li>
            
        
        
    
        
        
        
        
        
            <li class="nav-header developerRU ">Разработчику</li>
            
                <li class="drop-menu developerRU " data-order="1">
                    <a href="/ru/for-developer/index">Обзор</a>
                </li>
            
                <li class="drop-menu developerRU " data-order="2">
                    <a href="/ru/for-developer/digitaldata">Объект digitalData</a>
                </li>
            
                <li class="drop-menu developerRU " data-order="2">
                    <a href="/ru/for-developer/partners">События партнерских систем</a>
                </li>
            
                <li class="drop-menu developerRU " data-order="3">
                    <a href="/ru/for-developer/naming">Правила именования переменных и событий</a>
                </li>
            
                <li class="drop-menu developerRU " data-order="3">
                    <a href="/ru/for-developer/snippet">Подключение SegmentStream</a>
                </li>
            
        
        
    
        
        
        
        
        
            <li class="nav-header ecommerceRU ">Внедрение в ecommerce</li>
            
                <li class="drop-menu ecommerceRU " data-order="1">
                    <a href="/ru/ecommerce/main-page">Главная страница</a>
                </li>
            
                <li class="drop-menu ecommerceRU " data-order="1">
                    <a href="/ru/ecommerce/index">Обзор</a>
                </li>
            
                <li class="drop-menu ecommerceRU " data-order="2">
                    <a href="/ru/ecommerce/listing">Категория товаров</a>
                </li>
            
                <li class="drop-menu ecommerceRU " data-order="3">
                    <a href="/ru/ecommerce/search">Результаты поиска</a>
                </li>
            
                <li class="drop-menu ecommerceRU " data-order="4">
                    <a href="/ru/ecommerce/product">Карточка товара</a>
                </li>
            
                <li class="drop-menu ecommerceRU " data-order="5">
                    <a href="/ru/ecommerce/cart">Корзина</a>
                </li>
            
                <li class="drop-menu ecommerceRU " data-order="6">
                    <a href="/ru/ecommerce/checkout">Страница оформления заказа</a>
                </li>
            
                <li class="drop-menu ecommerceRU " data-order="7">
                    <a href="/ru/ecommerce/transaction">Спасибо за покупку</a>
                </li>
            
                <li class="drop-menu ecommerceRU " data-order="8">
                    <a href="/ru/ecommerce/content">Текстовая страница</a>
                </li>
            
        
        
    
        
        
        
        
        
            <li class="nav-header digitalDataRU ">Список переменных</li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/wishlist">wishlist</a>
                </li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/cart">cart</a>
                </li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/changes">changes</a>
                </li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/context">context</a>
                </li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/events">events</a>
                </li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/listing">listing</a>
                </li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/page">page</a>
                </li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/product">product</a>
                </li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/recommendation">recommendation</a>
                </li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/standard-version">version</a>
                </li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/transaction">transaction</a>
                </li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/user">user</a>
                </li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/website">website</a>
                </li>
            
                <li class="drop-menu digitalDataRU " data-order="1">
                    <a href="/ru/digitaldata/campaigns">campaigns</a>
                </li>
            
        
        
    
        
        
        
        
        
            <li class="nav-header eventsRU ">Список событий</li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/viewed-product">Viewed Product</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/added-payment-info">Added Payment Info</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/added-product-to-wishlist">Added Product to Wishlist</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/added-product">Added Product</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/clicked-campaign">Clicked Campaign</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/clicked-product">Clicked Product</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/completed-checkout-step">Completed Checkout Step</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/completed-transaction">Completed Transaction</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/logged-in">Logged In</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/received-voucher">Received Voucher</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/refunded-transaction">Refunded Transaction</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/registered">Registered</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/removed-product-from-wishlist">Removed Product from Wishlist</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/removed-product">Removed Product</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/searched-products">Searched Products</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/started-order">Started Order</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/subscribed">Subscribed</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/unsubscribed">Unsubscribed</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/updated-cart">Updated Cart</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/updated-profile-info">Updated Profile Info</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/viewed-campaign">Viewed Campaign</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/viewed-cart">Viewed Cart</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/viewed-checkout-step">Viewed Checkout Step</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/viewed-experiment">Viewed Experiment</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/viewed-page">Viewed Page</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/viewed-product-detail">Viewed Product Detail</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/viewed-product-listing">Viewed Product Listing</a>
                </li>
            
                <li class="drop-menu eventsRU " data-order="2">
                    <a href="/ru/events/achieved-experiment-goal">Achieved Experiment Goal</a>
                </li>
            
        
        
    
        
        
        
        
        
            <li class="nav-header integrationsRU ">Список интеграций</li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/yandex-metrica">Yandex Metrica</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/admitad">Admitad</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/citiads">Cityads</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/criteo">Criteo</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/ddmanager-streaming">SegmentStream Streaming</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/facebook">Facebook</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/gdeslon">GdeSlon</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/google-adwords">Google Adwords</a>
                </li>
            
                <li class="drop-menu integrationsRU  current " data-order="1">
                    <a href="/ru/integrations/google-analytics">Google Analytics</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/google-tag-manager">Google Tag Manager</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/linkprofit">LinkProfit</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/mindbox">Mindbox</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/mixmarket">Mixmarket</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/ofsys">Ofsys</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/onesignal">OneSignal</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/owox">OWOX</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/retail-rocket">Retail Rocket</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/rtb-house">RTB House</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/vkontakte">Vkontakte</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/weborama">Weborama</a>
                </li>
            
                <li class="drop-menu integrationsRU " data-order="1">
                    <a href="/ru/integrations/actionpay">Actionpay</a>
                </li>
            
        
        
    
<!-- List additional links. It is recommended to add a divider
    e.g. <li class="divider"></li> first to break up the content. -->
</ul>


                    </div>

                    <div id="content" class="col-sm-9 col-md-7">
                        <div class="page-header">
    <h1>Google Analytics
        
    </h1>
</div>

<p>В данном разделе вы узнаете:</p>
<ul>
  <li>Как установить счетчик Google Analytics на ваш сайт.</li>
  <li>Как настроить отслеживание событий Google Analytics</li>
  <li>Как настроить модуль расширенной электронной торговли.</li>
  <li>Как настроить события Google Analytics</li>
  <li>Как передать кастомные параметры, метрики и группы контента</li>
  <li>Как тонко настроить отслеживание Google Analytics на вашем сайте</li>
</ul>

<p>SegmentStream позволяет с легкостью отправлять данные о поведении ваших пользователей в <a href="https://analytics.google.com/">Google Analytics</a>. После полной <a href="/ru/for-developer/">интеграции digitalData с вашим сайтом</a>, можно перейти к настройке интеграции в панели SegmentStream.</p>

<h3 id="Навигация-по-странице">Навигация по странице</h3>
<hr />
<ul class="page-navigation">
  <li><a href="#0">Введение</a></li>
  <li><a href="#1">Идентификатор отслеживания</a></li>
  <li><a href="#1_1">Отслеживание событий</a></li>
  <li><a href="#2">Модуль Enhanced Ecommerce</a></li>
  <li><a href="#4">User Id</a></li>
  <li><a href="#5">Улучшенная атрибуция ссылок</a></li>
  <li><a href="#6">Анонимизация IP</a></li>
  <li><a href="#7">Включить кроссдоменное отслеживание</a></li>
  <li><a href="#8">Валюта</a></li>
  <li><a href="#9">Частота сэмплирования</a></li>
  <li><a href="#10">Домен сайта</a></li>
  <li><a href="#11_1">ClientId</a></li>
  <li><a href="#11">Пользовательские метрики</a></li>
  <li><a href="#12">Пользовательские параметры</a></li>
  <li><a href="#13">Группы контента</a></li>
  <li><a href="#15">Название трекера</a></li>
</ul>

<h3 id="Введение"><a name="0"></a>Введение</h3>
<hr />
<p>С помощью SegmentStream можно полностью интегрировать Google Analytics с вашим сайтом: события, расширенная электронная торговля, специальные метрики и параметры, группы контента и много другое. <br />
<a href="https://support.google.com/analytics#topic=3544906">Справка Google по Google Analytics</a> <br /><br />
Чтобы настроить интеграцию с Google Analytics:</p>
<ol>
  <li>авторизуйтесь на сайте <a href="https://admin.segmentstream.com">segmentstream.com</a> и перейдите к <a href="https://admin.segmentstream.com/">панели управления интеграциями</a></li>
  <li>Нажмите на блок с логотипом Google Analytics
<img src="/img/integrations.ga.listing.png" alt="" /></li>
  <li>В открывшейся панели - настройте Google Analytics.
<img src="/img/integrations.ga.settings.png" alt="" />
<br />
Подробнее о настройках вы можете прочитать ниже.</li>
</ol>

<blockquote>
  <p>Важно! Для работы основного трекера Google Analytics необходимо настроить событие <a href="/ru/events/viewed-page">Viewed Page</a></p>
</blockquote>

<h3 id="Идентификатор-отслеживания"><a name="1"></a>Идентификатор отслеживания</h3>
<hr />
<p>Чтобы настроить отслеживание сайта необходимо создать ресурс в аккаунте Google Analytics. При создании ресурса, Google Analytics сгенерирует уникальный идентификатор отслеживания. Как его найти - смотрите на скриншоте ниже.
<img src="/img/integrations.ga.id.png" alt="" />
Скопируйте идентификатор отслеживания и вставьте его в интерфейсе SegmentStream в соответствующее поле.
<img src="/img/integrations.ga.settings.id.png" alt="" /></p>

<h3 id="Отслеживание-событий"><a name="1_1"></a>Отслеживание событий</h3>
<hr />
<p>SegmentStream по-умолчанию отправляет в Google Analytics все события, добавленные в массив <code class="highlighter-rouge">digitalData.events</code>.</p>

<blockquote>
  <p>Важно! Событие <a href="/ru/events/viewed-page">Viewed Page</a> автоматически преобразуется к типу взаимодействия pageview и не попадают в отчет Behaviour &gt; events &gt; top events</p>
</blockquote>

<p>Все события, передаваемые в Google Analytics, могут иметь несколько характеристик: eventCategory, eventAction, eventLabel, eventValue, nonInteraction.
SegmentStream имеет встроенный мэппер формата digitalData в формат Google Analytics. Ниже приведен пример события клика по кнопке.</p>
<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">digitalData</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="na">category</span><span class="p">:</span> <span class="s1">'UX'</span><span class="p">,</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'Clicked Button'</span><span class="p">,</span>
  <span class="na">action</span><span class="p">:</span> <span class="s1">'Clicked Button'</span><span class="p">,</span>
  <span class="na">label</span><span class="p">:</span> <span class="s1">'Green'</span><span class="p">,</span>
  <span class="na">value</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="na">nonInteraction</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">})</span>
</code></pre>
</div>

<p>Данное событие будет автоматически преобразовано к формату Google Analytics:</p>
<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">ga</span><span class="p">(</span><span class="s1">'send'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">hitType</span><span class="p">:</span> <span class="s1">'event'</span><span class="p">,</span>
  <span class="na">eventCategory</span><span class="p">:</span> <span class="s1">'UX'</span><span class="p">,</span>
  <span class="na">eventAction</span><span class="p">:</span> <span class="s1">'Clicked Button'</span><span class="p">,</span>
  <span class="na">eventLabel</span><span class="p">:</span> <span class="s1">'Green'</span><span class="p">,</span>
  <span class="na">eventLabel</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="na">nonInteraction</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>
</code></pre>
</div>

<blockquote>
  <p>Важно! По-умолчанию, если вы не передадите поле action, в качестве eventAction будет использовано значение поля name. Таким образом action и name могут принимать различные значения.</p>
</blockquote>

<blockquote>
  <p>Важно! По-умолчанию, nonInteraction принимает значение false.</p>
</blockquote>

<p><a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/events?hl=ru">Справка Google по отслеживанию событий</a></p>

<h3 id="Модуль-enhanced-ecommerce"><a name="2"></a>Модуль Enhanced Ecommerce</h3>
<hr />
<p>Google Analytics позволяет отслеживать взаимодействие пользователей с вашими товарами: просмотры товаров в каталогах, клики на товары, детальный просмотр карточек товаров, добавления в корзину, покупки и другое. Интеграция с DDM позволяет подключить или отключить модуль расширенной электронной торговли в 1 клик.</p>

<p><a href="https://support.google.com/analytics/answer/6166254?hl=ru">Справка Google по Enhanced Ecommerce</a></p>

<blockquote>
  <p>Важно! Чтобы модуль Enhanced Ecommerce корректно работал - необходимо настроить передачу определенных событий в массив <code class="highlighter-rouge">digitalData.events</code>. Список событий приведен ниже:</p>
</blockquote>

<p><strong>Поддерживаемые события</strong></p>
<ul>
  <li><a href="/ru/events/viewed-product">Viewed Product</a></li>
  <li><a href="/ru/events/clicked-product">Clicked Product</a></li>
  <li><a href="/ru/events/viewed-campaign">Viewed Campaign</a></li>
  <li><a href="/ru/events/clicked-campaign">Clicked Campaign</a></li>
  <li><a href="/ru/events/viewed-product-detail">Viewed Product Detail</a></li>
  <li><a href="/ru/events/added-product">Added Product</a></li>
  <li><a href="/ru/events/removed-product">Removed Product</a></li>
  <li><a href="/ru/events/viewed-checkout-step">Viewed Checkout Step</a></li>
  <li><a href="/ru/events/completed-checkout-step">Completed Checkout Step</a></li>
  <li><a href="/ru/events/completed-transaction">Completed Transaction</a></li>
  <li><a href="/ru/events/refunded-transaction">Refunded Transaction</a></li>
</ul>

<blockquote>
  <p>SegmentStream отправляет данные о взаимодействии с товарами совместно с хитом типа <code class="highlighter-rouge">pageview</code>, если событие пришло синхронно с событием Viewed Page. <strong>Например</strong>: после загрузки страницы “Спасибо за покупку” в Google Analytics уйдет только 1 хит типа <code class="highlighter-rouge">pageview</code>. Этот хит будет содержать информацию, как о странице, так и о покупке.
Если событие взаимодействия с товарами наступило после отправки хита типа <code class="highlighter-rouge">pageview</code>, в Google Analytics будет отправлен дополнительный хит типа <code class="highlighter-rouge">event</code>. <strong>Например</strong>: на крточке товара доступна возможность оформить заказ в 1 клик без перезагрузки страницы. В этом случае после загрузки страницы будет отправлен 1-й хит типа <code class="highlighter-rouge">pageview</code> с информацией о товаре и страницы. После нажатия кнопки “подтверждения заказа в 1 клик” и добавления события “Completed Transaction” в массив <code class="highlighter-rouge">digitalData.events</code>, DigitalDatManager отправит 2-й хит типа <code class="highlighter-rouge">event</code> с информацией о заказе.</p>
</blockquote>

<h3 id="user-id"><a name="4"></a>User Id</h3>
<hr />
<p>Если SegmentStream правильно интегрирован в ваш сайт, то значит на каждой странице у вас передан идентификатор посетителя из вашей CRM или ERP в переменную digitalData.user.id. Google Analytics позволяет склеивать сеансы вашего пользователя, произведенные с разных браузеров или устройств, в одну историю благодаря модулю “USER-ID”. Включить или отключить отправку USER-ID в Google Analytics можно в 1 клик.</p>

<p><a href="https://support.google.com/analytics/answer/3123662?hl=ru">Справка Google по USER-ID</a></p>
<h3 id="Улучшенная-атрибуция-ссылок"><a name="5"></a>Улучшенная атрибуция ссылок</h3>
<hr />
<p>Модуль улучшенной атрибуции ссылок позволяет автоматически различать ссылки на странице, ведущие на один и тот же URL. Это может понадобиться в случае если вы используете Расширение Page Analytics для Chrome. Данное расширение добавляет слой аналитических данных поверх страницы. Расширение подсвечивает каждую ссылку и выводит набор KPIs. В случае, если бы улучшенная атрибуция ссылок не была включена, KPIs для 2-х ссылок ведущих на один и тот же URL имели ли бы идентичные значения.</p>

<p><a href="https://support.google.com/analytics/answer/3123662?hl=ru">Справка Google по Расширению Page Analytics для Chrome</a></p>
<h3 id="Анонимизация-ip"><a name="6"></a>Анонимизация IP</h3>
<hr />
<p>Google Analytics позволяет владельцам сайтов скрывать IP-адреса своих посетителей при обработки данных. Включить или отключить функцию анонимизации IP можно в 1 клик.</p>

<p><a href="https://support.google.com/analytics/answer/2763052?hl=ru">Справка Google по Анонимизации IP</a></p>

<h3 id="Включить-кроссдоменное-отслеживание"><a name="7"></a>Включить кроссдоменное отслеживание</h3>
<hr />
<p>По умолчанию Google Analytics не склеивает в одну историю посещения пользователем разных доменов 2-го уровня. Это бывает нужно, если разные части одного и того же сайта находятся на разных доменах, например: интернет-магазин - https://shop.com и блог - https://blog.com. Для отправки информации о поведении конкретного посетителя на разных доменах в один ресурс Google Analytics необходимо включить функцию кроссдоменного отслеживания.
Активируйте функцию “Включить кроссдоменное отслеживание” и добавьте все домены, которые необходимо связать.</p>

<p><a href="https://support.google.com/analytics/answer/1034342?hl=ru">Справка Google по кроссдоменному отслеживанию</a></p>

<h3 id="Валюта"><a name="8"></a>Валюта</h3>
<hr />
<p>В Google Analytics есть набор параметров модуля расширенной электронной торговли, которые представляют собой денежные значения в различной валюте, например: доход от товаров, доход от транзакции, стоимость доставки и т.д. Список поддерживаемых валют описан в справке Google. Важно! Если указанная в настройках интеграции SegmentStream валюта отличается от глобальной валюты представления (указанной в настройках Google Analytics), Google Analytics произведет конвертацию по курсу обмена за предыдущий день.</p>

<p><a href="https://support.google.com/analytics/answer/6205902?hl=ru">Справка Google по Валюте</a></p>

<h3 id="Частота-сэмплирования-данных-о-скорости-загрузки-сайта"><a name="9"></a>Частота сэмплирования данных о скорости загрузки сайта</h3>
<hr />
<p>Google позволяет указать процент пользователей, данные которых будут собираться для отслеживания скорости загрузки сайтов. Значение по умолчанию: 1.</p>

<p><a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference#siteSpeedSampleRate">Справка Google по Сэмплированию данных о скорости загрузки сайта</a></p>

<h3 id="Домен-сайта"><a name="10"></a>Домен сайта</h3>
<hr />
<p>В данной настройке вы можете задать домен, в который будет сохраняться файл cookie с уникальным идентификатором посетителя вашего сайта. Мы рекомендуем использовать значение по умолчанию: <code class="highlighter-rouge">auto</code>. В этом случае, библиотека Google Analytics автоматически сохраняет все cookie на домен самого высокого уровня.</p>

<p><a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/cookies-user-id">Справка Google по Кросс-доменному отслеживанию</a></p>

<h3 id="clientid"><a name="11_1"></a>ClientId</h3>
<hr />
<p>Google Analytics определяет разные хиты от одного и того же посетителя сайта с помощью ClientId.
Идентификатор формируется библиотекой analytics.js и сохраняется в cookies браузера посетителя.
Через SegmentStream отправку ClientId с первым и всеми последующими хитами посетителя можно настроить в 1 клик.
Выберите номер пользовательского параметра в выпадающем списке под полем “Пользовательский параметр, в который передается clientId”</p>

<h3 id="Пользовательские-метрики"><a name="11"></a>Пользовательские метрики</h3>
<hr />
<p>В Google Analytics есть возможность передавать специальные показатели (метрики). Показатель - это количественное значение (Целое число, дробное число, время). Например: количество сеансов, сумма заказа, глубина просмотра и т.д. Метрики можно передавать на разном уровне:</p>
<ul>
  <li>на уровне хита (любое взаимодействие пользователя с сайтом, информация о котором уходит на сервера Google Analytics)</li>
  <li>на уровне продукта (все взаимодействия пользователя с товаром).
Для того, чтобы настроить передачу специального показателя:</li>
</ul>

<ol>
  <li>Создайте специальный показатель в интерфейсе Google Analytics. Запомните номер созданного показателя
 <img src="/img/integrations.ga.metric.2.png" alt="" /></li>
  <li>Перейдите к панели настройки интеграции SegmentStream, поле “Пользовательские метрики”.
 <img src="/img/integrations.ga.metric.1.png" alt="" /></li>
  <li>В выпадающем списке выберите номер метрики, который вы только что создали в Google Analytics (например metric1).
 <img src="/img/integrations.ga.metric.3.png" alt="" /></li>
  <li>Укажите источник данных:
    <ul>
      <li><strong>DigitalData</strong>. Любая числовая переменная, которая содержится в объекте digitalData, может быть передана в Google Analytics на уровнях хита. Например: вместе с загрузкой страницы можно передать в Google Analytics на уровне хита количество товаров, которое прямо сейчас у пользователя лежит в корзине.</li>
      <li><strong>Event</strong>. В Google Analytics вместе с событием можно передать дополнительную информацию, например: если вам не хватает полей Event Category, Event Action, Event Label, Value.</li>
      <li><strong>Product</strong>. Google Analytics позволяет принимать специальные показатели на уровне продукта. Таким образом, вместе со всеми событиями, которые происходят с товарами на вашем сайте (например: просмотр карточки товара, добавления товара в корзину, покупка товара) вы можете передавать дополнительные показатели. Например, можно передать количество товарных единиц, доступное на складе в момент просмотра пользователем карточки товаров.
        <blockquote>
          <p><strong>Важно!</strong> При выборе источника “DigitalData” значение пользовательской метрики или параметра будет передаваться со всеми хитами типа <code class="highlighter-rouge">viewpage</code> и <code class="highlighter-rouge">event</code>, происходящими после загрузки страницы. При выборе источника “Event” значение пользовательской метрики или параметра будет передано только с конкретным хитом типа <code class="highlighter-rouge">event</code>.</p>
        </blockquote>
      </li>
    </ul>
  </li>
  <li>Сохраните и опубликуйте изменения.</li>
</ol>

<p><a href="https://support.google.com/analytics/answer/2709829?hl=ru#set_up_custom_metrics">Справка Google по Специальным показателям</a></p>

<h3 id="Пользовательские-параметры"><a name="12"></a>Пользовательские параметры</h3>
<hr />
<p>В Google Analytics есть возможность передавать специальные Параметры (dimensions). Параметры - это атрибуты данных. Все метрики (числовые данные) рассчитываются в срезах параметров. Примеры параметров: Источник трафика, URL страницы, Регион и т.д. Параметры можно передавать на разном уровне:</p>
<ul>
  <li>на уровне хита (информация не агрегируется)</li>
  <li>на уровне сеанса (информация агрегируется в срезе каждого сеанса каждого пользователя)</li>
  <li>на уровне пользователя (информация агрегируется в срезе всех сеансов каждого пользователя)</li>
  <li>на уровне продукта (информация агрегируется в срезе продуктов).</li>
</ul>

<blockquote>
  <p>Короткое пояснение, для понимания разницы уровней: Например вы хотите передать в GA хобби вашего пользователя в тот момент когда пользователь сохраняет информацию о себе на вашем сайте. Вы отправляете событие и вместе с событием передает специальный параметр (название хобби вашего пользователя). Если вы настроили параметр на уровне хита, то информация о хобби пользователя будет доступна только в отчетах по событиям. Если вы настроили параметр на уровне сеанса, то информация о хобби будет доступна в большинстве отчетов, но только в рамках одного дня и одного сеанса. Если вы настроили параметр на уровне пользователя, то информация о хобби будет доступна в большинстве отчетов и за любой диапазон дат после события.<br /></p>
</blockquote>

<p>Настройка специальных параметров идентична <a href="#11">настройке специальных показателей</a>.</p>

<p><a href="https://support.google.com/analytics/answer/2709829?hl=ru#set_up_custom_dimensions">Справка Google по Специальным параметрам</a></p>

<h3 id="Группы-контента"><a name="13"></a>Группы контента</h3>
<hr />
<p>В Google Analytics существует возможность просматривать отчеты не только в срезах определенных адресов страниц, но и групп страниц. Эти группы вы можете задавать сами. Например, вы можете создать группу контента “Тип страницы” и при каждой загрузке станицы передавать туда значение переменной <code class="highlighter-rouge">digitalData.page.type</code>.</p>
<ol>
  <li>Создайте группу контента:
<img src="/img/integrations.ga.content-grouping.png" alt="" /></li>
  <li>Настройте передачу <code class="highlighter-rouge">digitalData.page.type</code> в интерфейсе DDM:
<img src="/img/integrations.ga.content-grouping.1.png" alt="" /></li>
</ol>

<p><a href="https://support.google.com/analytics/answer/2853546?hl=ru">Справка Google по Группам контента</a></p>

<!--
### <a name="14"></a>Специальные поля
------
Библиотека analytics.js при загрузке каждой страницы создает трекер отслеживания, который отправляет на сервера Google Analytics информацию о действиях пользователя. Информация передается в виде имя-значение. В справке GA [задокументировано много имен/полей](https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference), которые умеет распознавать и записывать в БД система, однако можно создать свое поле и записать туда определенное значение. Это поле будет проигнорировано сервером Google Analytics, но запрос с этим полем будет сформирован библиотекой analytics.js
> Этот нестандартный прием в редких случаях нужен [интеграции с OWOX](/ru/integrations/owox) для того, чтобы например, личные данные пользователя не попали в GA, но при этом записались в bigQuery.

Настройка специальных полей идентична [настройке специальных показателей](#11).
-->

<h3 id="Название-трекера"><a name="15"></a>Название трекера</h3>
<hr />
<p>Библиотека analytics.js позволяет создавать не один, а несколько счетчиков на одной и той же странице. Это может понадобиться если вы отправляете данные в два и более ресурсов. Например, если у вас международный бизнес и вы собираете данные из всех регионов в 1 общий ресурс, но каждый регион имеет свой собственный ресурс со своими особенными настройками.
Мы рекомендуем задавать уникальное значение, например <code class="highlighter-rouge">ddm</code>.</p>

<p><a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/creating-trackers?hl=ru#working_with_multiple_trackers">Справка Google по Названию трекера</a></p>


                    </div>
                
            </div>
            <button id="myBtn" title="Go to top"></button>
        </div>
        <div id="footer">
            <div class="questionaire">
    <div class="row step1">
        <div class="col-sm-6 question">
            
            Эта статья была для Вас полезна?
            
        </div>
        <div class="col-sm-6 answer">
            <div class="button-questionaire">
                ДА
            </div>
            <div class="button-questionaire">
                НЕТ
            </div>
        </div>
    </div>
    <div class="row step2">
        <div class="col-xs-12">
            
            Спасибо за отзыв!
            
        </div>
    </div>
</div>
<a href="/"><img src="/img/segmentstream-logo.png" height="47" alt=SegmentStream documentation class="ddm-logo-footer"></a>
<p class="copyright">Copyright © 2019 "SegmentStream" Все права защищены.</p>

        </div>
        <!-- SegmentStream snippet -->
        <script type="text/javascript">
        (function(h,d){d=d||"cdn.segmentstream.com";var a=window.ddManager=window.ddManager||[];window.ddListener=window.ddListener||[];var b=window.digitalData=window.digitalData||{};b.events=b.events||[];b.changes=b.changes||[];if(!a.initialize)if(a.invoked)window.console&&console.error&&console.error("SegmentStream snippet included twice.");else{a.invoked=!0;a.methods="initialize addIntegration persist unpersist on once off setConsent".split(" ");a.factory=function(k){return function(){var c=Array.prototype.slice.call(arguments);
        c.unshift(k);a.push(c);return a}};for(b=0;b<a.methods.length;b++){var f=a.methods[b];a[f]=a.factory(f)}a.load=function(a){var c=document.createElement("script");c.type="text/javascript";c.charset="utf-8";c.async=!0;c.src=a;a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(c,a)};a.loadProject=function(b){var c=window.location.search;if(0<=c.indexOf("ddm_test_mode=1"))try{var e=!0;window.localStorage.setItem("_ddm_test_mode","1")}catch(g){}else if(0<=c.indexOf("ddm_test_mode=0"))try{e=
        !1,window.localStorage.removeItem("_ddm_test_mode")}catch(g){}else try{e="1"===window.localStorage.getItem("_ddm_test_mode")}catch(g){}e?a.load(window.DDMANAGER_TESTMODE_INIT_URL||"https://api.segmentstream.com/v1/ddm-initialization/"+b+".js"):a.load(window.DDMANAGER_INIT_URL||"https://"+d+"/project/"+b+".js")};a.CDN_DOMAIN=d;a.SNIPPET_VERSION="1.0.11";a.loadProject(h)}})("975f9b27-a262-4758-9019-0bf81f566d68");
        </script>
        <!-- //SegmentStream snippet -->
    </body>
</html>
